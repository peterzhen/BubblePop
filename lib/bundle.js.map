{"version":3,"sources":["webpack:///webpack/bootstrap 859818680b87cd8d312b","webpack:///./lib/bubblepop.js","webpack:///./lib/game.js","webpack:///./lib/bubble.js","webpack:///./lib/player.js","webpack:///./lib/shooter.js","webpack:///./lib/util.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AChBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA8B,aAAa;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,UAAU;AAC7B;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AC7EA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;;;;;;ACzFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;;AAGA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 859818680b87cd8d312b\n **/","const Game = require(\"./game\");\n\nconst init =  () => {\n  const canvasEl = document.getElementById(\"canvas\");\n  canvasEl.width = 275;\n  canvasEl.height = 455;\n  const ctx = canvasEl.getContext(\"2d\");\n\n  window.stage = new createjs.Stage(\"canvas\");\n  const game = new Game(window.stage);\n  game.fillCanvas();\n\n  createjs.Ticker.setFPS(60);\n  createjs.Ticker.addEventListener(\"tick\", game.tick);\n}\n\n$(document).ready(init);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/bubblepop.js\n ** module id = 0\n ** module chunks = 0\n **/","const Bubble = require(\"./bubble\");\nconst Player = require(\"./player\");\n\nclass Game {\n  constructor(stage){\n    this.stage = stage;\n    this.bubbleGrid = [];\n    this.bubbles = []\n    this.player = new Player({ game: this });\n    this.currentBubble = this.player.currentBubble;\n    this.nextBubble = this.player.nextBubble;\n    this.shooter = this.player.shooter;\n    this.generateBubbles(8, 13);\n\n    this.tick = this.tick.bind(this);\n  }\n\n  tick(){\n    if (this.player.shooting){\n      this.currentBubble.tick();\n      this.player.tick();\n      this.checkCollisions();\n    }\n    window.stage.update();\n  }\n\n  generateBubbles(rows, cols) {\n    for (let i = 0; i < cols; i++) {\n        this.bubbleGrid[i] = [];\n        for (let j = 0; j < rows; j++) {\n          if (i % 2 === 1){\n            if (j < rows - 1){\n              this.bubbleGrid[i][j] = 0;\n            }\n          } else {\n            this.bubbleGrid[i][j] = 0;\n          }\n        }\n    }\n\n    level1.forEach( (bubble) => {\n      if (bubble.i % 2 === 1){\n        if (bubble.j < rows - 1){\n          this.bubbleGrid[bubble.i][bubble.j] = new Bubble({\n            x: bubble.j * 34,\n            y: bubble.i * 30,\n            shifted: true,\n            sheet: bubble.sheet\n          });\n        }\n      } else {\n        this.bubbleGrid[bubble.i][bubble.j] = new Bubble({\n          x: bubble.j * 34,\n          y: bubble.i * 30,\n          shifted: false,\n          sheet: bubble.sheet\n        });\n      }\n      this.bubbles.push(this.bubbleGrid[bubble.i][bubble.j])\n    });\n  }\n\n  checkCollisions(){\n    this.bubbles.forEach((bubble) => {\n      if (this.checkCollision(bubble.bubble, this.currentBubble.bubble)){\n        this.currentBubble.stopBubble();\n        this.currentBubble.snapBubble();\n        const grid = this.currentBubble.getGridPosition();\n        this.bubbles.push(this.currentBubble);\n        this.bubbleGrid[grid.y][grid.x] = this.currentBubble;\n      }\n    });\n  }\n\n  checkCollision(bubble1, bubble2){\n    const bubblew = 32;\n    const bubbleh = 32;\n\n    const bubble1x = bubble1.x;\n    const bubble1y = bubble1.y;\n\n    const bubble2x = bubble2.x;\n    const bubble2y = bubble2.y;\n\n    if (    bubble1x >= bubble2x + bubblew\n        ||  bubble1x + bubblew <= bubble2x\n        ||  bubble1y >= bubble2y + bubbleh\n        ||  bubble1y + bubbleh <= bubble2y) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  allObjects() {\n    let flatBubbles = [].concat.apply([], this.bubbles);\n\n    return [].concat(flatBubbles, this.currentBubble, this.nextBubble);\n  }\n\n  fillCanvas(){\n    this.stage.addChild(this.shooter.shooter);\n    this.allObjects().map ( (bubble) => this.stage.addChild(bubble.bubble));\n  }\n\n  updateBubbles(currentBubble, nextBubble){\n    this.currentBubble = currentBubble;\n    this.nextBubble = nextBubble;\n  }\n}\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 1\n ** module chunks = 0\n **/","\nclass Bubble {\n  constructor(options){\n    this.x = options.x;\n    this.y = options.y;\n    this.vx = 0;\n    this.vy = 0;\n    this.shifted = options.shifted;\n    this.bubble = new createjs.Sprite(options.sheet, \"animate\");\n    this.pseudoBubble = new createjs.Shape();\n    this.createBubble(this.color);\n  }\n\n  tick(){\n    this.x += this.vx;\n    this.y += this.vy;\n\n    //bounce sides\n    if (this.x <= 0 || this.x + 34 >= window.stage.canvas.width ) {\n      this.vx = -this.vx;\n    }\n\n    //stick top\n    if ( this.y <= 0 ){\n      this.y = 0;\n      this.stopBubble();\n      this.snapBubble();\n    }\n\n    this.updateBubble(this.x, this.y);\n  }\n  // window.blueBubble = new createjs.Sprite(blueBubble, \"animate\");\n\n  createBubble(color){\n    // this.bubble.graphics.beginFill(\"red\").drawCircle(0, 0, 15);\n    this.bubble.x = this.x;\n    if (this.shifted) this.shiftRow();\n    this.bubble.y = this.y;\n  }\n\n  updateBubble(xpos, ypos, shifted = this.shifted){\n    this.x = xpos;\n    this.y = ypos;\n    this.shifted = shifted;\n    this.bubble.x = this.x;\n    if (this.shifted) this.shiftRow();\n    this.bubble.y = this.y;\n  }\n\n  //I HAD THIS AT FLOOR\n  getGridPosition(){\n    const gridx = Math.round(this.x / 34);\n    const gridy = Math.round(this.y / 30);\n    return {\n      x: gridx,\n      y: gridy\n    }\n  }\n\n  snapBubble(){\n    const grid = this.getGridPosition();\n    const x = grid.x * 34;\n    const y = grid.y * 30;\n    //TODO: snap to closest grid position and check if bubble exists in current grid\n    grid.y % 2 === 1 ? this.updateBubble(x, y, true) : this.updateBubble(x, y);\n  }\n\n  stopBubble(){\n    this.vx = 0;\n    this.vy = 0;\n  }\n\n  shiftRow(){\n    this.bubble.x += 17;\n  }\n}\n\nmodule.exports = Bubble;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/bubble.js\n ** module id = 2\n ** module chunks = 0\n **/","const Bubble = require(\"./bubble\");\nconst Shooter = require(\"./shooter\");\n\nconst currentBubbleX = 135;\nconst currentBubbleY = 390;\nconst nextBubbleX = 90;\nconst nextBubbleY = 410;\n\nclass Player {\n  constructor(options){\n    this.currentBubble;\n    this.nextBubble;\n    this.shooting = false;\n    this.game = options.game;\n    this.initStage();\n    this.shooter = new Shooter();\n    this.bindKeyHandlers();\n\n    this.updateGameBubble = this.updateGameBubble.bind(this);\n  }\n\n  tick(){\n    if (this.shooting && this.currentBubble.vx === 0 && this.currentBubble.vy === 0){\n      this.shooting = false;\n      this.setCurrentBubble();\n      this.setNextBubble();\n      this.updateGameBubble();\n    }\n  }\n\n  bindKeyHandlers(){\n    document.addEventListener(\"keydown\", (event) => {\n      switch(event.keyCode){\n\n        case 32:\n        event.preventDefault();\n        this.shootBubble();\n\n        default:\n          return;\n      }\n    });\n  }\n\n  initStage() {\n    this.currentBubble = new Bubble({\n      x: currentBubbleX,\n      y: currentBubbleY,\n      shifted: false,\n      sheet: randomSheet()\n    });\n\n    this.nextBubble = new Bubble({\n      x: nextBubbleX,\n      y: nextBubbleY,\n      shifted: false,\n      sheet: randomSheet()\n    });\n  }\n\n  shootBubble(){\n    if (this.shooting === false){\n      this.shooter.fireBubble(this.currentBubble);\n      this.shooting = true;\n\n    }\n  }\n\n  updateGameBubble(){\n    this.game.updateBubbles(this.currentBubble, this.nextBubble)\n  }\n\n  setCurrentBubble(){\n    this.currentBubble = this.nextBubble;\n    this.currentBubble.updateBubble(currentBubbleX, currentBubbleY);\n    this.shooter.updateCurrentBubble(this.currentBubble);\n  }\n\n  setNextBubble(){\n    this.nextBubble = new Bubble({\n      x: nextBubbleX,\n      y: nextBubbleY,\n      shifted: false,\n      sheet: randomSheet()\n    });\n    window.stage.addChild(this.nextBubble.bubble);\n  }\n}\n\nmodule.exports = Player;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/player.js\n ** module id = 3\n ** module chunks = 0\n **/","const Player = require('./player');\nconst Util = require('./util');\n\nclass Shooter {\n  constructor (){\n    this.shooter = this.createShooter();\n    this.handleRotation = this.handleRotation.bind(this);\n\n    this.bindKeyHandlers();\n  }\n\n  bindKeyHandlers(){\n    document.addEventListener(\"keydown\", this.handleRotation);\n  }\n\n  handleRotation(event) {\n    const code = event.keyCode;\n    if (code === 37){\n      event.preventDefault();\n      if (this.shooter.rotation > -85) this.shooter.rotation -= 2.5;\n    } else if (code === 39){\n      event.preventDefault();\n      if (this.shooter.rotation < 85) this.shooter.rotation += 2.5;\n    }\n  }\n\n  fireBubble(bubble){\n    const rad = Util.convertToRads(this.shooter.rotation + 90);\n    bubble.vx = Math.cos(rad)* -13;\n    bubble.vy = Math.sin(rad)* -13;\n  }\n\n  createShooter(){\n    const img = new Image();\n    img.src = \"./assets/images/shooter.png\";\n    const shooter = new createjs.Bitmap(img);\n\n    const shooterContainer = new createjs.Container();\n    shooterContainer.x = 150;\n    shooterContainer.y = 410;\n    shooter.regX = 11.5;\n    shooter.regY = 40.5;\n    shooter.x = 0;\n    shooter.y = 0;\n    shooterContainer.addChild(shooter);\n    return shooterContainer;\n  }\n\n  updateCurrentBubble(bubble){\n    this.currentBubble = bubble;\n  }\n\n}\n\nmodule.exports = Shooter;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/shooter.js\n ** module id = 4\n ** module chunks = 0\n **/","const Util = {\n  // Normalize the length of the vector to 1, maintaining direction.\n  dir (vec) {\n    var norm = Util.norm(vec);\n    return Util.scale(vec, 1 / norm);\n  },\n  // Find distance between two points.\n  dist (pos1, pos2) {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n  },\n  // Find the length of the vector.\n  norm (vec) {\n    return Util.dist([0, 0], vec);\n  },\n  // Return a randomly oriented vector with the given length.\n  randomVec (length) {\n    var deg = 2 * Math.PI * Math.random();\n    return Util.scale([Math.sin(deg), Math.cos(deg)], length);\n  },\n  // Scale the length of a vector by the given amount.\n  scale (vec, m) {\n    return [vec[0] * m, vec[1] * m];\n  },\n\n  findDistance(coord1, coord2) {\n    let dist = Math.sqrt(\n      Math.pow(coord1[0] - coord2[0], 2) +\n      Math.pow(coord1[1] - coord2[1], 2)\n    );\n\n    return dist;\n  },\n\n  convertToRads (deg) {\n  return deg * Math.PI / 180;\n  }\n\n\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}
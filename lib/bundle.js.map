{"version":3,"sources":["webpack:///webpack/bootstrap 1a682747625cf16b659f","webpack:///./lib/bubblepop.js","webpack:///./lib/game.js","webpack:///./lib/bubble.js","webpack:///./lib/player.js","webpack:///./lib/shooter.js","webpack:///./lib/util.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;;;;;;;ACtEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,aAAa;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC,sBAAsB;AACtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,aAAa;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,UAAU;AAC7B;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,oBAAmB,mBAAmB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,iDAAgD,sBAAsB;AACtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACrfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AChGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;;;;;;ACnGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACrFA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1a682747625cf16b659f\n **/","const Game = require(\"./game\");\n\nconst init =  () => {\n  const gameContainer = document.getElementById(\"game\");\n  const canvasEl = document.getElementById(\"canvas\");\n  gameContainer.style.display = \"inline\";\n  canvasEl.width = 275;\n  canvasEl.height = 455;\n  const ctx = canvasEl.getContext(\"2d\");\n\n  window.stage = new createjs.Stage(\"canvas\");\n  window.game = new Game(window.stage);\n  game.fillCanvas();\n\n  createjs.Ticker.setFPS(60);\n  createjs.Ticker.addEventListener(\"tick\", game.tick);\n}\n\nconst startModal = () => {\n  const modal = document.getElementById('modal');\n  const modalContent = document.getElementById('modal-content');\n  modalContent.style.height = \"550px\";\n  modalContent.style.width = \"400px\";\n  modalContent.style.opacity = \"1.0\";\n  modalContent.style.margin = \"3% auto\";\n  modal.style.display = \"block\";\n\n  const welcomeText = document.createElement(\"div\");\n  welcomeText.innerHTML = \"WELCOME TO BUBBLEPOP!\"\n  welcomeText.className = \"modal-header\";\n\n  const instructions = document.createElement(\"div\");\n  instructions.className = \"modal-text\";\n  instructions.innerHTML = \"THE GOAL OF THE GAME IS TO BREAK BUBBLES!  TO BREAK BUBBLES, SIMPLY MATCH THREE OR MORE BUBBLES OF THE SAME COLOR TOGETHER.  ALL BUBBLES ATTACHED BELOW IT WILL FALL WITH IT.  TO FINISH THE LEVEL, CLEAR THE SCREEN OF BUBBLES.\";\n\n  const controls = document.createElement(\"div\");\n  controls.className = \"modal-img\";\n\n  const playButton = document.createElement(\"div\");\n  playButton.className = \"modal-button\";\n  playButton.innerHTML = \"LET'S PLAY!\";\n\n  modalContent.appendChild(welcomeText);\n  modalContent.appendChild(instructions);\n  modalContent.appendChild(controls);\n  modalContent.appendChild(playButton);\n\n  playButton.onclick = event => {\n    modalContent.innerHTML = \"\";\n    modal.style.display = \"none\";\n    init();\n  }\n}\n\nconst displayLogo = () => {\n  const logo = document.getElementById('logo');\n  const logoImage = document.getElementById('logo-image');\n\n  logoImage.style.opacity = \"1.0\";\n  logoImage.style.transform = \"scale(1.1)\";\n\n  window.setTimeout( () => {\n    logoImage.style.opacity = \"0\";\n    window.setTimeout( () => {\n      logo.style.display = \"none\";\n      startModal();\n    }, 2000);\n  },2000);\n}\n\n$(document).ready(displayLogo);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/bubblepop.js\n ** module id = 0\n ** module chunks = 0\n **/","const Bubble = require(\"./bubble\");\nconst Player = require(\"./player\");\n\nclass Game {\n  constructor(stage){\n    this.stage = stage;\n    this.bubbleGrid = [];\n    window.rowOffset = 0;\n    this.currentLevel = 0;\n    this.turnCount = 0;\n    this.score = 0;\n    this.gameOver = false;\n    this.bricks = [];\n    this.player = new Player({ game: this });\n    this.currentBubble = this.player.currentBubble;\n    this.nextBubble = this.player.nextBubble;\n    this.shooter = this.player.shooter;\n    this.showLevel();\n    this.bindButtons();\n    this.generateBubbles(rows, cols);\n\n    this.tick = this.tick.bind(this);\n  }\n\n  tick(){\n    if (!this.gameOver) this.checkGameOver();\n    this.allBubbles().forEach(bubble => bubble.tick());\n    if (this.player.shooting){\n      this.currentBubble.tick();\n      this.player.tick();\n      this.checkCollisions();\n      this.checkGameOver();\n      this.checkTurnCount();\n    }\n    stage.update();\n  }\n\n  showLevel(){\n    const level = document.getElementById('level');\n    level.innerHTML = `LEVEL: ${this.currentLevel + 1}`;\n  }\n\n  resetBoard(){\n    this.gameOver = false;\n    const gameContainer = document.getElementsByClassName(\"game-container\");\n    gameContainer[0].style.backgroundColor = 'rgb(94, 168, 214)';\n    this.stage.removeAllChildren();\n    this.bubbleGrid = [];\n    this.turnCount = 0;\n    window.rowOffset = 0;\n    this.player = new Player({ game: this });\n    this.currentBubble = this.player.currentBubble;\n    this.nextBubble = this.player.nextBubble;\n    this.shooter = this.player.shooter;\n    this.generateBubbles(rows, cols);\n\n    this.fillCanvas();\n    this.showLevel();\n  }\n\n  resetGame(){\n    this.currentLevel = 0;\n    this.resetBoard();\n  }\n\n  resetLevel(){\n    this.resetBoard();\n  }\n\n  nextLevel(){\n    this.currentLevel += 1;\n    this.resetBoard();\n  }\n\n  bindButtons(){\n    const instructionModal = document.getElementById('instructions-modal');\n    const keysModal = document.getElementById('keys-modal');\n    const resetLevel = document.getElementById('reset-level-modal');\n    const resetGame = document.getElementById('reset-modal');\n    const aboutModal = document.getElementById('about-modal');\n\n    instructionModal.onclick = event => {\n      this.openModal(\"WELCOME TO BUBBLEPOP!\",\n                     \"THE GOAL OF THE GAME IS TO BREAK BUBBLES!  TO BREAK BUBBLES, SIMPLY MATCH THREE OR MORE BUBBLES OF THE SAME COLOR TOGETHER.  ALL BUBBLES ATTACHED BELOW IT WILL FALL WITH IT.  TO FINISH THE LEVEL, CLEAR THE SCREEN OF BUBBLES.\",\n                     \"CLOSE\",\n                     \"350px\",\n                     \"400px\");\n    }\n\n    keysModal.onclick = event => {\n      this.openModal(\"KEYS\",\n                     \"IMG\",\n                     \"CLOSE\",\n                     \"350px\",\n                     \"400px\");\n    }\n\n    resetLevel.onclick = event => {\n      this.openModal(\"RESET LEVEL\",\n                     \"ARE YOU SURE YOU WANT TO RESET THE LEVEL?  YOU WILL LOSE ALL PROGRESS FOR THIS LEVEL.\",\n                     \"RESET LEVEL\",\n                     \"350px\",\n                     \"300px\",\n                     \"CANCEL\");\n    }\n\n    resetGame.onclick = event => {\n      this.openModal(\"RESTART GAME\",\n                     \"ARE YOU SURE YOU WANT TO RESET THE GAME?  YOU WILL LOSE ALL PROGRESS.\",\n                     \"RESTART\",\n                     \"350px\",\n                     \"300px\",\n                     \"CANCEL\");\n    }\n\n    aboutModal.onclick = event => {\n      this.openModal(\"ABOUT THE DEVELOPER\",\n                     \"ABOUT\",\n                     \"CLOSE\",\n                     \"450px\",\n                     \"500px\");\n    }\n  }\n\n  generateBubbles(rows, cols) {\n    for (let i = 0; i < rows; i++) {\n        this.bubbleGrid[i] = [];\n        for (let j = 0; j < cols; j++) {\n          if (i % 2 === 1){\n            if (j < cols - 1){\n              this.bubbleGrid[i][j] = -1;\n            }\n          } else {\n            this.bubbleGrid[i][j] = -1;\n          }\n        }\n    }\n\n    levels[this.currentLevel].forEach( (bubble) => {\n      if (bubble.i % 2 === 1){\n        if (bubble.j < cols - 1){\n          this.bubbleGrid[bubble.i][bubble.j] = new Bubble({\n            x: bubble.j * rowWidth,\n            y: bubble.i * rowHeight,\n            shifted: true,\n            sheet: bubble.sheet,\n            color: bubble.color,\n            processed: false\n          });\n        }\n      } else {\n        this.bubbleGrid[bubble.i][bubble.j] = new Bubble({\n          x: bubble.j * rowWidth,\n          y: bubble.i * rowHeight,\n          shifted: false,\n          sheet: bubble.sheet,\n          color: bubble.color,\n          processed: false\n        });\n      }\n    });\n  }\n\n  checkTurnCount(){\n    const gameContainer = document.getElementsByClassName(\"game-container\");\n    if (this.turnCount < 3){\n      gameContainer[0].style.backgroundColor = 'rgb(133, 226, 127)';\n    } else if (this.turnCount === 3){\n      gameContainer[0].style.backgroundColor = 'rgb(216, 171, 112)';\n    } else if (this.turnCount === 4){\n      gameContainer[0].style.backgroundColor = 'rgb(224, 85, 85)';\n    } else if (this.turnCount === 5) {\n      gameContainer[0].style.backgroundColor = 'rgb(133, 226, 127)';\n      this.addBricks();\n      this.turnCount = 0;\n      window.rowOffset += 1;\n      this.allBubbles().forEach( bubble => {\n        bubble.y += rowHeight;\n      });\n\n      this.bubbleGrid.splice(-1,1);\n    }\n  }\n\n  checkCollisions(){\n    this.allBubbles().forEach((bubble) => {\n      if (bubble !== -1) {\n        if (this.checkCollision(bubble.bubble, this.currentBubble.bubble)){\n          this.currentBubble.stopBubble();\n          this.currentBubble.snapBubble();\n          this.addToGrid(this.currentBubble);\n          this.burstMatching(this.currentBubble);\n        }\n      }\n    });\n\n    if (this.currentBubble.y <= (window.rowOffset * rowHeight)){\n      this.currentBubble.stopBubble();\n      this.currentBubble.snapBubble();\n      this.addToGrid(this.currentBubble);\n      this.burstMatching(this.currentBubble);\n    }\n  }\n\n  addBricks(){\n    this.bricks.forEach( brick => {\n      brick.y += 30;\n    });\n    const brick = new createjs.Bitmap(\"./assets/images/bricks.png\");\n    brick.x = 0;\n    brick.y = -5;\n    this.bricks.push(brick);\n    this.stage.addChild(brick);\n  }\n\n  addToGrid(bubble){\n    const grid = bubble.getGridPosition();\n    this.bubbleGrid[grid.y][grid.x] = bubble;\n  }\n\n  checkCollision(bubble1, bubble2){\n    const dx = bubble1.x - bubble2.x;\n    const dy = bubble1.y - bubble2.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (distance < bubbleWidth) return true;\n\n    return false;\n  }\n\n  animateBurst(x, y){\n    const burst = new createjs.Sprite(window.burstSheet, \"animate\");\n    burst.x = x;\n    burst.y = y;\n    stage.addChild(burst);\n\n    window.setTimeout( () => {\n      stage.removeChild(burst);\n    }, 60);\n  }\n\n  burstMatching(bubble){\n    const matchingBubbles = this.findMatching(bubble);\n\n    if (matchingBubbles.length >= 3){\n\n      matchingBubbles.forEach( bubble => {\n        this.animateBurst(bubble.x, bubble.y);\n        this.removeBubble(bubble);\n      });\n      this.dropFloatingBubbles();\n    } else {\n      this.turnCount++;\n    }\n  }\n\n  findMatching(bubble){\n    this.resetBubbles();\n\n    const uncheckedBubbles = [bubble];\n    bubble.processed = true;\n    const matching = [];\n\n    while (uncheckedBubbles.length > 0){\n      let currentBubble = uncheckedBubbles.pop();\n\n      if (currentBubble.color === bubble.color) {\n         matching.push(currentBubble);\n\n         let neighbors = this.getNeighbors(currentBubble);\n\n         neighbors.forEach( bubble => {\n           if(!bubble.processed){\n             uncheckedBubbles.push(bubble);\n             bubble.processed = true;\n           }\n         });\n      }\n    }\n\n    return matching;\n  }\n\n  dropFloatingBubbles(){\n    this.resetBubbles();\n\n    let floating = [];\n\n    this.allBubbles().forEach( bubble => {\n      if(!bubble.processed){\n\n        const cluster = this.findFloating(bubble);\n\n        if (cluster.every( bubble => bubble.y !== (window.rowOffset * rowHeight))){\n          floating = floating.concat(cluster);\n        }\n      }\n    });\n\n    floating.forEach( bubble => {\n      const grid = bubble.getGridPosition();\n      bubble.vy = 13;\n      setTimeout(() => {\n        this.bubbleGrid[grid.y][grid.x] = -1;\n        stage.removeChild(bubble.bubble);\n      }, 1000);\n    });\n  }\n\n  findFloating(bubble) {\n    const unchecked = [bubble];\n    bubble.processed = true;\n    const floating = [];\n\n    while (unchecked.length > 0) {\n      const currentBubble = unchecked.pop();\n\n      floating.push(currentBubble);\n\n      const neighbors = this.getNeighbors(currentBubble);\n\n      neighbors.forEach( bubble => {\n        if(!bubble.processed){\n          unchecked.push(bubble);\n          bubble.processed = true;\n        }\n      });\n    }\n\n    return floating;\n  }\n\n  getNeighbors(bubble) {\n    let grid = bubble.getGridPosition();\n    const neighbors = [];\n\n    const deltas = grid.y % 2 === 1 ? oddDeltas : evenDeltas;\n\n    for (let i = 0; i < deltas.length; i++) {\n      let deltax = grid.x + deltas[i][1];\n      let deltay = grid.y + deltas[i][0];\n\n      if (deltax >= 0 && deltax < cols && deltay >= 0 && deltay < rows) {\n        if (this.bubbleGrid[deltay][deltax]){\n          if (this.bubbleGrid[deltay][deltax] !== -1){\n            neighbors.push(this.bubbleGrid[deltay][deltax]);\n          }\n        }\n      }\n    }\n    return neighbors;\n  }\n\n  removeBubble(bubble){\n    const grid = bubble.getGridPosition();\n    this.bubbleGrid[grid.y][grid.x] = -1;\n    stage.removeChild(bubble.bubble);\n  }\n\n  resetBubbles() {\n    let flatBubbles = [].concat.apply([], this.bubbleGrid);\n    flatBubbles.forEach( bubble => {\n      if ( bubble !== -1 ) bubble.processed = false;\n    });\n  }\n\n  allBubbles(){\n    let flatBubbles = [].concat.apply([], this.bubbleGrid);\n    const bubbles = flatBubbles.filter ( bubble => bubble !== -1 );\n    return bubbles;\n  }\n\n  allObjects() {\n    return [].concat(this.allBubbles(), this.currentBubble, this.nextBubble);\n  }\n\n  fillCanvas(){\n    this.stage.addChild(this.shooter.shooter);\n    this.allObjects().map ( (bubble) => this.stage.addChild(bubble.bubble));\n  }\n\n  updateBubbles(currentBubble, nextBubble){\n    this.currentBubble = currentBubble;\n    this.nextBubble = nextBubble;\n  }\n\n  checkGameOver(){\n    this.checkLose();\n    this.checkWin();\n  }\n\n  checkLose(){\n    const lastRow = this.bubbleGrid[this.bubbleGrid.length - 1];\n    const remainingBubbles = lastRow.filter( bubble => bubble !== -1);\n    if (remainingBubbles.length > 0){\n      this.gameOver = true;\n      this.openModal(\"YOU LOSE.\",\n                     \"TRY AGAIN.\",\n                     \"RESTART\");\n    }\n  }\n\n  checkWin(){\n    if (this.bubbleGrid[0].filter( bubble => bubble !== -1).length === 0){\n      this.gameOver = true;\n      if (this.currentLevel === maxLevel){\n        this.openModal(\"YOU WIN!\",\n                       \"CHECK BACK FOR MORE LEVELS LATER!\",\n                       \"RESTART\");\n      } else {\n        this.openModal(\"GREAT JOB!\",\n                       `GET READY FOR \\nLEVEL ${this.currentLevel + 2}`,\n                        \"START\");\n      }\n    }\n  }\n\n  openModal(header, text, button, height = \"250px\", width = \"200px\", closeButton){\n    const modal = document.getElementById('modal');\n    const modalContent = document.getElementById('modal-content');\n    modalContent.innerHTML = \"\";\n\n    modalContent.style.height = height;\n    modalContent.style.width = width;\n\n    const modalHeader = document.createElement(\"div\");\n    modalHeader.className = \"modal-header\";\n    modalHeader.innerHTML = header;\n    modalContent.appendChild(modalHeader);\n\n    const modalText = document.createElement(\"div\");\n    if (text === \"IMG\"){\n      modalText.className = \"modal-img\";\n    } else if (text === \"ABOUT\"){\n      this.aboutLinks(modalContent, modalText);\n    } else {\n      modalText.className = \"modal-text\";\n      modalText.innerHTML = text;\n    }\n    modalContent.appendChild(modalText);\n\n    const modalButton = document.createElement(\"div\");\n    modalButton.className = \"modal-button\";\n    modalButton.innerHTML = button;\n    modalContent.appendChild(modalButton);\n\n    if (closeButton === \"CANCEL\"){\n      const cancelButton = document.createElement(\"div\");\n      cancelButton.className = \"modal-button\";\n      cancelButton.innerHTML = closeButton;\n      modalContent.appendChild(cancelButton);\n\n      cancelButton.onclick = event => {\n        modal.style.display = \"none\";\n      }\n    }\n\n    modalButton.onclick = event => {\n      if (button === \"RESTART\"){\n        this.resetGame();\n      }else if (button === \"START\"){\n        this.nextLevel();\n      }else if (button === \"RESET LEVEL\"){\n        this.resetLevel();\n      }\n      modal.style.display = \"none\";\n      this.showLevel();\n    }\n\n    modal.style.display = \"block\";\n  }\n\n  aboutLinks(parentDom, dom){\n    dom.className = \"about-links\";\n    const modalText = document.createElement(\"div\");\n    const portfolio = document.createElement(\"a\");\n    const linkedIn = document.createElement(\"a\");\n    const github = document.createElement(\"a\");\n\n    modalText.className = \"modal-text\";\n    portfolio.className = \"portfolio\";\n    linkedIn.className = \"linkedIn\";\n    github.className = \"github\";\n\n    modalText.innerHTML = \"Game developed by Peter Zhen.  Created with JavaScript, Canvas, EaselJS and HTML/CSS.  For more projects or if you would like to connect, click on one of the links below! (Clicking on a link will open a new tab)\";\n    portfolio.href = \"http://peterzhen.com/\";\n    linkedIn.href = \"https://www.linkedin.com/in/peterzhen\";\n    github.href = \"https://github.com/peterzhen\";\n\n    portfolio.target = \"_blank\";\n    linkedIn.target = \"_blank\";\n    github.target = \"_blank\";\n\n    parentDom.appendChild(modalText);\n    dom.appendChild(portfolio);\n    dom.appendChild(linkedIn);\n    dom.appendChild(github);\n\n  }\n}\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 1\n ** module chunks = 0\n **/","class Bubble {\n  constructor(options){\n    this.x = options.x;\n    this.y = options.y;\n    this.vx = 0;\n    this.vy = 0;\n    this.shifted = options.shifted;\n    this.color = options.color;\n    this.processed = false;\n    this.bubble = new createjs.Sprite(options.sheet, \"animate\");\n    this.pseudoBubble = new createjs.Shape();\n    this.createBubble(this.color);\n  }\n\n  tick(){\n    this.x += this.vx;\n    this.y += this.vy;\n\n    //bounce sides\n    if (this.x <= 0 || this.x + 34 >= window.stage.canvas.width ) {\n      this.vx = -this.vx;\n    }\n\n    // stick top\n    if ( this.y <= 0 ){\n      this.y = 0;\n    }\n\n    this.updateBubble(this.x, this.y);\n  }\n  // window.blueBubble = new createjs.Sprite(blueBubble, \"animate\");\n\n  burstBubble(){\n    this.bubble = new createjs.Sprite(window.burstSheet, \"animate\");\n  }\n  \n  createBubble(color){\n    // this.bubble.graphics.beginFill(\"red\").drawCircle(0, 0, 15);\n    this.bubble.x = this.x;\n    if (this.shifted) this.shiftRow();\n    this.bubble.y = this.y;\n  }\n\n  updateBubble(xpos, ypos, shifted = this.shifted){\n    this.x = xpos;\n    this.y = ypos;\n    this.shifted = shifted;\n    this.bubble.x = this.x;\n    if (this.shifted) this.shiftRow();\n    this.bubble.y = this.y;\n  }\n\n  getGridPosition(){\n    const yOffset = window.rowOffset * rowHeight;\n    let gridy = Math.floor(((this.y - yOffset) + radius) / rowHeight);\n\n    let offset = 0;\n    if (gridy % 2 === 1) offset = radius;\n\n    let gridx = Math.floor(((this.x - offset) + radius) / rowWidth);\n\n    if (gridy < 0) gridy = 0;\n    if (gridx < 0) gridx = 0;\n    if (gridx >= cols - 1) {\n      gridx = cols - 1;\n      if (offset > 0) gridx--;\n    }\n    return {\n      x: gridx,\n      y: gridy\n    }\n  }\n\n  snapBubble(){\n    let grid = this.getGridPosition();\n    const yOffset = window.rowOffset * rowHeight;\n    const x = grid.x * 34;\n    const y = (grid.y * 30) + yOffset;\n    //TODO: snap to closest grid position and check if bubble exists in current grid\n    if (grid.y % 2 === 1){\n      this.updateBubble(x, y, true);\n    } else {\n      this.updateBubble(x, y);\n    }\n  }\n\n  stopBubble(){\n    this.vx = 0;\n    this.vy = 0;\n  }\n\n  shiftRow(){\n    this.bubble.x += radius;\n  }\n}\n\nmodule.exports = Bubble;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/bubble.js\n ** module id = 2\n ** module chunks = 0\n **/","const Bubble = require(\"./bubble\");\nconst Shooter = require(\"./shooter\");\n\nconst currentBubbleX = 115;\nconst currentBubbleY = 390;\nconst nextBubbleX = 60;\nconst nextBubbleY = 410;\n\nclass Player {\n  constructor(options){\n    this.currentBubble;\n    this.nextBubble;\n    this.shooting = false;\n    this.game = options.game;\n    this.initStage();\n    this.shooter = new Shooter();\n    this.bindKeyHandlers();\n\n    this.updateGameBubble = this.updateGameBubble.bind(this);\n  }\n\n  tick(){\n    if (this.shooting && this.currentBubble.vx === 0 && this.currentBubble.vy === 0){\n      this.shooting = false;\n      this.setCurrentBubble();\n      this.setNextBubble();\n      this.updateGameBubble();\n    }\n  }\n\n  bindKeyHandlers(){\n    const shoot = document.getElementById(\"shoot\");\n    shoot.onclick = event => this.shootBubble();\n\n    document.addEventListener(\"keydown\", (event) => {\n      const code = event.keyCode;\n\n      if (code === 32 ||\n          code === 87 ||\n          code === 38){\n        event.preventDefault();\n        this.shootBubble();\n      }\n    });\n  }\n\n  initStage() {\n    let currentRandom = randomColor(this.game.currentLevel);\n    if (this.game.currentLevel === 1){\n      currentRandom = allSprites[0];\n    }\n    this.currentBubble = new Bubble({\n      x: currentBubbleX,\n      y: currentBubbleY,\n      shifted: false,\n      sheet: currentRandom.sheet,\n      color: currentRandom.color\n    });\n\n    const nextRandom = randomColor(this.game.currentLevel);\n    this.nextBubble = new Bubble({\n      x: nextBubbleX,\n      y: nextBubbleY,\n      shifted: false,\n      sheet: nextRandom.sheet,\n      color: nextRandom.color\n    });\n  }\n\n  shootBubble(){\n    if (this.shooting === false){\n      this.shooter.fireBubble(this.currentBubble);\n      this.shooting = true;\n    }\n  }\n\n  updateGameBubble(){\n    this.game.updateBubbles(this.currentBubble, this.nextBubble)\n  }\n\n  setCurrentBubble(){\n    this.currentBubble = this.nextBubble;\n    this.currentBubble.updateBubble(currentBubbleX, currentBubbleY);\n    this.shooter.updateCurrentBubble(this.currentBubble);\n  }\n\n  setNextBubble(){\n    const newBubble = randomColor(this.game.currentLevel);\n    this.nextBubble = new Bubble({\n      x: nextBubbleX,\n      y: nextBubbleY,\n      shifted: false,\n      sheet: newBubble.sheet,\n      color: newBubble.color\n    });\n    window.stage.addChild(this.nextBubble.bubble);\n  }\n}\n\nmodule.exports = Player;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/player.js\n ** module id = 3\n ** module chunks = 0\n **/","const Player = require('./player');\nconst Util = require('./util');\n\nclass Shooter {\n  constructor (){\n    this.shooter = this.createShooter();\n    this.handleRotation = this.handleRotation.bind(this);\n\n    this.bindKeyHandlers();\n    this.bindOnScreenButtons();\n  }\n\n  bindOnScreenButtons(){\n    let rotationInterval;\n    const left = document.getElementById(\"left\");\n    const right = document.getElementById(\"right\");\n\n    left.onmousedown =  (event) => {\n      rotationInterval = setInterval( () => this.moveLeft(), 50);\n    };\n\n    right.onmousedown =  (event) => {\n      rotationInterval = setInterval( () => this.moveRight(), 50);\n    };\n\n    left.onmouseup =  event => clearInterval(rotationInterval);\n    right.onmouseup = event => clearInterval(rotationInterval);\n  }\n\n  bindKeyHandlers(){\n    document.addEventListener(\"keydown\", this.handleRotation);\n  }\n\n  removeKeyHandlers(){\n    document.removeEventListener(\"keydown\", this.handleRotation);\n  }\n\n  handleRotation(event) {\n    const code = event.keyCode;\n\n    if (code === 37 || code === 65){\n      event.preventDefault();\n      this.moveLeft();\n    } else if (code === 39 || code === 68){\n      event.preventDefault();\n      this.moveRight();\n    }\n  }\n\n  fireBubble(bubble){\n    const rad = Util.convertToRads(this.shooter.rotation + 90);\n    bubble.vx = Math.cos(rad)* -13;\n    bubble.vy = Math.sin(rad)* -13;\n  }\n\n  moveLeft(){\n    if (this.shooter.rotation > -85) this.shooter.rotation -= 2.5;\n  }\n\n  moveRight(){\n    if (this.shooter.rotation < 85) this.shooter.rotation += 2.5;\n  }\n\n  createShooter(){\n    const img = new Image();\n    img.src = \"./assets/images/shooter.png\";\n    const shooter = new createjs.Bitmap(img);\n\n    const shooterContainer = new createjs.Container();\n    shooterContainer.x = 130;\n    shooterContainer.y = 410;\n    shooter.regX = 11.5;\n    shooter.regY = 40.5;\n    shooter.x = 0;\n    shooter.y = 0;\n    shooterContainer.addChild(shooter);\n    return shooterContainer;\n  }\n\n  updateCurrentBubble(bubble){\n    this.currentBubble = bubble;\n  }\n\n}\n\nmodule.exports = Shooter;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/shooter.js\n ** module id = 4\n ** module chunks = 0\n **/","const Util = {\n\n  convertToDeg (rad) {\n    return rad * 180 / Math.PI;\n  },\n\n  convertToRads (deg) {\n    return deg * Math.PI / 180;\n  },\n\n  circleIntersection(x1, y1, r1, x2, y2, r2) {\n      // Calculate the distance between the centers\n      var dx = x1 - x2;\n      var dy = y1 - y2;\n      var len = Math.sqrt(dx * dx + dy * dy);\n\n      if (len < r1 + r2) {\n          return true;\n      }\n\n      return false;\n  }\n\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}